<!doctype html>
<html lang="en">

<head>
  <style>
    .flash-messages {
      position: fixed;
      top: 1.5rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      min-width: 320px;
      max-width: 90vw;
    }
    .flash-message {
      margin-bottom: 0.5rem;
      padding: 1rem 2rem;
      border-radius: 1rem;
      font-weight: 600;
      font-size: 1.1rem;
      box-shadow: 0 2px 12px #0003;
      color: #fff;
    }
    .flash-success { background: #22c55e; }
    .flash-danger, .flash-error { background: #ef4444; }
    .flash-warning { background: #f59e42; }
    .flash-info { background: #374151; }
  </style>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ title or "MovieBook" }}</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/logo.svg') }}" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #111827;
      color: #e5e7eb;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      position: relative;
    }

    /* Large logo background */
    .logo-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      pointer-events: none;
      opacity: 0.10;
      background: url('{{ url_for('static', filename='img/logo.png') }}') center center no-repeat;
      background-size: contain;
    }

    .nav {
      background: #1f2937;
      padding: 1rem 0;
    }

    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
    }

    .nav-inner {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-weight: 800;
      font-size: 1.25rem;
      color: #fff;
      text-decoration: none;
    }

    .links a {
      margin-left: 1rem;
      text-decoration: none;
      color: #d1d5db;
      transition: color 0.2s ease, transform 0.2s ease;
    }

    .links a:hover {
      color: #ff4081;
      transform: translateY(-2px);
    }

    .logout {
      color: #f87171;
      font-weight: 600;
    }

    .logout:hover {
      color: #ef4444;
      transform: scale(1.05);
    }

    .active {
      color: #ff4081;
      font-weight: 700;
    }

    .footer {
      margin-top: 3rem;
      padding: 1rem 0;
      text-align: center;
      color: #9ca3af;
      border-top: 1px solid #374151;
    }
  </style>
</head>

<body>
  <!-- Large Logo Background -->
  <div class="logo-bg"></div>

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-messages">
        {% for category, message in messages %}
          <div class="flash-message flash-{{ category }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
  <!-- NAVBAR (always visible) -->
  <header id="navbar" class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <a href="{{ url_for('index') }}" class="logo" style="display:flex;align-items:center;gap:0.5rem;">
          <img src="{{ url_for('static', filename='img/favicon.svg') }}" alt="Logo" style="height:2rem;width:2rem;vertical-align:middle;display:inline-block;">
          MovieBook
        </a>
      </div>
      <nav class="links">
        <a href="{{ url_for('index') }}" class="{% if request.endpoint == 'index' %}active{% endif %}">üè† Home</a>
        {% if current_user.is_authenticated %}
          <a href="{{ url_for('dashboard') }}" class="{% if request.endpoint == 'dashboard' %}active{% endif %}">üìã Dashboard</a>
          <a href="{{ url_for('logout') }}" class="logout">üö™ Logout</a>
        {% else %}
          <a href="{{ url_for('login') }}" class="">üîë Login</a>
        {% endif %}
  <a href="#about-section" id="about-link" class="hover:text-pink-500">‚ÑπÔ∏è About</a>
      </nav>
    </div>
  </header>

  <!-- Page Content -->
  <main class="container">
    {% block content %}{% endblock %}
  </main>

  <section id="about-section" class="about bg-gray-900 py-16 mt-24 mb-0 rounded-t-3xl shadow-2xl border-t-4 border-pink-400" style="margin-bottom:0;padding-bottom:5rem;">
    <div class="container mx-auto px-4 flex flex-col md:flex-row gap-10 items-center justify-between">
      <div class="max-w-lg">
        <h1 class="text-3xl font-bold text-pink-500 mb-3">About MovieBook</h1>
        <p class="mb-4 text-lg text-gray-200">This is a demo movie booking platform built with Flask, TMDb API, and SQLite. Book your favorite movies, manage your bookings, and enjoy a modern UI experience!</p>
        <div class="mb-4">
          <strong>MovieBook HQ</strong><br>
          1234 Hollywood Blvd, Suite 100<br>
          Los Angeles, CA 90028, USA<br>
          <span class="inline-block mt-1 text-sm text-gray-400">üìû (555) 123-4567</span>
        </div>
        <div class="flex gap-3 mt-2">
          <a href="https://instagram.com/" target="_blank" title="Instagram" class="hover:text-pink-500 text-pink-500">
            <svg width="28" height="28" fill="currentColor" viewBox="0 0 24 24"><path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5zm4.25 3.25a5.25 5.25 0 1 1 0 10.5a5.25 5.25 0 0 1 0-10.5zm0 1.5a3.75 3.75 0 1 0 0 7.5a3.75 3.75 0 0 0 0-7.5zm5.25.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0z"></path></svg>
          </a>
          <a href="https://twitter.com/" target="_blank" title="Twitter" class="hover:text-pink-500 text-pink-500">
            <svg width="28" height="28" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.59-2.47.7a4.3 4.3 0 0 0 1.88-2.37a8.59 8.59 0 0 1-2.72 1.04a4.28 4.28 0 0 0-7.29 3.9A12.13 12.13 0 0 1 3.11 4.8a4.28 4.28 0 0 0 1.32 5.71a4.24 4.24 0 0 1-1.94-.54v.05a4.28 4.28 0 0 0 3.43 4.19a4.3 4.3 0 0 1-1.93.07a4.28 4.28 0 0 0 4 2.98A8.6 8.6 0 0 1 2 19.54a12.13 12.13 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2c0-.19 0-.37-.01-.56A8.72 8.72 0 0 0 24 4.59a8.5 8.5 0 0 1-2.54.7z"></path></svg>
          </a>
          <a href="https://facebook.com/" target="_blank" title="Facebook" class="hover:text-pink-500 text-pink-500">
            <svg width="28" height="28" fill="currentColor" viewBox="0 0 24 24"><path d="M22.675 0h-21.35C.595 0 0 .592 0 1.326v21.348C0 23.408.595 24 1.325 24h11.495v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116C23.406 24 24 23.408 24 22.674V1.326C24 .592 23.406 0 22.675 0"></path></svg>
          </a>
          <a href="https://youtube.com/" target="_blank" title="YouTube" class="hover:text-pink-500 text-pink-500">
            <svg width="28" height="28" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a2.994 2.994 0 0 0-2.112-2.112C19.692 3.5 12 3.5 12 3.5s-7.692 0-9.386.574a2.994 2.994 0 0 0-2.112 2.112C0 7.88 0 12 0 12s0 4.12.502 5.814a2.994 2.994 0 0 0 2.112 2.112C4.308 20.5 12 20.5 12 20.5s7.692 0 9.386-.574a2.994 2.994 0 0 0 2.112-2.112C24 16.12 24 12 24 12s0-4.12-.502-5.814zM9.75 15.568V8.432L15.818 12l-6.068 3.568z"></path></svg>
          </a>
        </div>
      </div>
      <div class="rounded-xl overflow-hidden border-2 border-pink-400 shadow-lg">
        <iframe src="https://www.openstreetmap.org/export/embed.html?bbox=-118.344,34.098,-118.324,34.108&amp;layer=mapnik" style="border:1px solid #ccc;width:320px;height:180px;border-radius:0.5rem;"></iframe>
      </div>
    </div>
    <div class="mt-8 text-center text-xs text-gray-500">¬© 2025 MovieBook ‚Äî Demo</div>
  </section>
  <script>
    // Scroll to about section if About link is clicked and on about page
    document.addEventListener("DOMContentLoaded", function() {
      const aboutLink = document.getElementById("about-link");
      if (aboutLink && window.location.pathname.endsWith("/about")) {
        setTimeout(() => {
          const aboutSection = document.querySelector(".about");
          if (aboutSection) {
            aboutSection.scrollIntoView({ behavior: "smooth", block: "end" });
          }
        }, 300);
      }
    });
  </script>

  <!-- LOGIN POPUP (only if not logged in) -->
  {% if not current_user.is_authenticated %}
  <div id="loginPopup"
    class="fixed inset-0 bg-black/70 flex items-center justify-center opacity-0 pointer-events-none transition duration-700">
    <div class="bg-gray-900 rounded-2xl p-8 shadow-xl text-center w-[90%] max-w-md relative">
      <!-- Close button -->
      <button id="closePopup" class="absolute top-3 right-3 text-gray-400 hover:text-white text-2xl">‚úñ</button>

      <h2 class="text-2xl font-bold text-white mb-4">üîë Login Required</h2>
      <p class="text-gray-300 mb-6">Please log in to book your favorite movies üéü</p>
      <a href="{{ url_for('login') }}"
        class="px-6 py-3 bg-pink-600 hover:bg-pink-700 rounded-xl text-white font-medium transition">
        Go to Login
      </a>
    </div>
  </div>
  {% endif %}

  <!-- Script -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // About link smooth scroll
      const aboutLink = document.getElementById("about-link");
      if (aboutLink) {
        aboutLink.addEventListener("click", function(e) {
          const aboutSection = document.getElementById("about-section");
          if (aboutSection) {
            e.preventDefault();
            aboutSection.scrollIntoView({ behavior: "smooth", block: "end" });
          }
        });
      }

      // Navbar fade in (if logged in)
      {% if current_user.is_authenticated %}
      setTimeout(() => {
        const navbar = document.getElementById("navbar");
        navbar.classList.remove("hidden", "opacity-0");
      }, 3000);
      {% endif %}

      // Login popup (if not logged in)
      {% if not current_user.is_authenticated %}
      setTimeout(() => {
        const popup = document.getElementById("loginPopup");
        popup.classList.remove("opacity-0", "pointer-events-none");
      }, 30000);
      document.getElementById("closePopup").addEventListener("click", () => {
        document.getElementById("loginPopup").classList.add("opacity-0", "pointer-events-none");
      });
      {% endif %}
    });
  </script>
</body>

</html>